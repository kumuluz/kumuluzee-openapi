language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: "psIzxIhdqlb6hAQB6HDwyWlmt/coxoE7ZrYZdmslPRCMIP/TB6poiUOizGwnC7RiF3KQIvqM3lPAfhoh9cd2HfGLa3XCXD6z1uZhsI9DcTpcOnkajXYGwIvYxy7UZHSVGSwM6+i8mYqBi6s5JH2pd6qFCGxHkevphlsw4chCeoU4IEQop4Ukg+CrGq+T9SxsBOEOT2syixM1So6dqzikfHIhUBj82/FmOTmgkdK6afYHRqVgQ6PRntNRurAEUl3hSqY/EPF+aaEn6CbMEQiOUL5rACKy+MoCvx0cQEca+ihmRWctHvgrMFOq9ngFW+b1eF5nZhK9rNZGVBwnurnlHRID9Vn1BkVXlKuQbI3Xmo0ToeNw3toL5VTSIUwUX9oFoHCOdFCe9Jt/Wg3w/8yDm/MufG3YYLHt1vKX7nhtxZBLBnxg+2GHp/2KGu+LO/HuLONvpUFuRR1adS1iJ3VJiFoT1O9d4KfPdsnvabTD4BYclVXZL2vQxjpTdhobOWLODNjoy5LRqAtXfdqjUWol+5KFmk7RwPXm8X/3o695BWzMjzlETERGK/1yKoOkPeAMHlcll6JZkI8oehReA7Kpd7v0hrQQpVI820N4HSA/o0QcPCIZYFgQxtd4S/1+lohAYIB9c4PjK1uokJAN2Dhz92/2y2HVCEmcexjkvT37jKw="
  - secure: "IrJYhHbK6/loASAtoNrQrxybvn6LpBfQ83wIevf+uinWwNjRx++Kd4OE0xj8WyCcPdyPGNJQhtvZaZzJFVIc5sjWO6KwPT6xzHmVnFEWNY00ueeKK8W/12FODWrh0+/xnqCxuKqsVZ06rllQKv+R0AxFrrEOXi6ggA/qAOt0l9AVaRPpWk8JeqYwNKBQunj4JrPRD7z5RDVg7/OF6pcipzGOrRryZirTfOK2f5b5uoRHKdU4HeZ/HCPcYQn9dz8UA2fAwd8FuaA9NmttlTAZsXmm9N1PmFfyHXixhCG0gDd6ZyfS5UgFJuUrrl3NjewGh6RXaQfAOS2Ggg0EOQEIjrbYQX9nBLfTqn77dO321ArbCPIHaY7iBLZ/nc8mYNsHmPhC0Cl1I7rjNHm7Na36GizxgFoYXjtk7zUurpt2paKbHWiMv1eUppmiyz4ErvmBOKzV3FVE7ZfpJusX8VIZJ9LtQ+mpPps/CEez0NLQBgnemw6wchOqmEN7PrFl8VkTMM1So7LGxeTt0zLNqWqLU4fdNzmHrK/dn7mpZGMBbUBSsprQR/ZFKgU0MIe/9w4MOFeF4fh8XJG2hJox14uBCr+l6sHtbnZNUqu67vDCflW3BdGCXAwpChhEmnnmsiG4hZtgA5GRD/xzsLi2FCINd4s7T9AXU+DH2zFL3FFadEw="
  - secure: "JtQgyH1+o8vWhbOdJyigkWOWd/bOCIIXFlpvcvOV7vh8H9JrbHCI6CSnKoabFWz634P36Ox/g5gvelhZo/SrUgGAHAMFaxm/WCsP+GtCwrwtzmVXIopraDlGj+/WUmMwla2idhmeRtf90VJlwWlxJUMbZjzDSalXLAcy08XOySUXwRCWm4eDM6LQypAjz4hS+Punnw83mS4vtJfyKW1YWek5rliR65Cq0YRymRLXchwT3uWEZ+r4xaxjPYQSFSv7PQUtKtH3p69jY0TD1LZaRGmyLuiFH/KJpIuxbDAVf1hNfGU+RLuUSHkV3ApSXwWvtMeN9vIY60xOn/Sni6cjbThTNd73OLlkaffa6aWaYKIp+o9yCqhZhSsWJgGhpL44yfXb9A8YzDaTHCvJHuvFZMaJ4N7Kix03tMGojDkfYASpkAM0aL6K10T43Hl6E7EwWbuNOQiZBBlCQkybtRnbag7ochl+vscZ9v2uit6okDmrqV5jk0M9unrWpAPmsc5IzSdzYJuhi7AFLyK8Wn9hhmEBJRAJ+6j4ub/VvcDtpp+rbOA7xVdxeRg9poYhXp+SEDSamEhm+IWIM/HxULWrlBgTd+xIsgS46PoYlVCam7rOw82Egh6dsarU075ksV1V+1qOu7V7mhWNyd04RzNFWaNNbMFtNMtAQrerrNpZu+k="

cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_bf19104499f6_key -iv $encrypted_bf19104499f6_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi
